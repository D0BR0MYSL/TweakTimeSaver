# TweakTimeSaver

## [**Click here to switch the text to English language**](https://github.com/D0BR0MYSL/TweakTimeSaver)

## ![Platform](https://img.shields.io/static/v1?label=%D0%BF%D0%BB%D0%B0%D1%82%D1%84%D0%BE%D1%80%D0%BC%D0%B0&message=windows11/10&color=blue&style=flat)  ![language](https://img.shields.io/static/v1?label=%D0%BA%D0%BE%D0%B4&message=batchfile&color=orange&style=flat)

## Краткое описание

- Данное решение представляет собой набор файлов командных сценариев .cmd, помогающих быстро применить множество готовых настроек Windows 11 (или Windows 10) после чистой установки или полного сброса Windows. Решение подходит и для давно работающей системы, которая толком не настраивалась.
- Настройки подобраны, чтобы быть действительно полезными на практике и безвредными, без показухи в стиле "революционно лучших твикеров с бубенцами и свистелками". ("твикер", из англ. - программа тонкой настройки).
- Файлы командных сценариев .cmd представлены в виде Шагов для применения групп настроек Windows и названы так, чтобы было понятно, что эти Шаги позволяют сделать. Они также пронумерованы для последовательного запуска. Любой Шаг можно пропустить по желанию, сориентировавшись по названию или запустив и прочитав описание.
- Изменения настроек можно откатить, вернувшись к [Точке восстановления системы](https://learn.microsoft.com/ru-ru/windows/win32/sr/restore-points), автоматически созданной до применения настроек.

[![IMAGE ALT TEXT HERE](https://github.com/D0BR0MYSL/Big-Gifs/blob/main/TweakTimeSaver_preview_ru-RU.gif)](https://www.youtube.com)

_\--Пожалуйста, подождите публикации видео на YouTube--_

### Требования / Целевая система

- Windows 11 Pro
- Windows 10 Pro

### Как скачать и разместить

Если вы еще не знакомы с сайтом Github, просто нажмите зеленую кнопку "Code" в правом верхнем углу этой страницы и выберите опцию "Download ZIP". Затем распакуйте загруженный zip-архив.

## **Документация**

## Как начать пользоваться

- Запустите файл с многоязычным именем и словом "Старт", чтобы развернуть набор доступных файлов "сценариев командной строки". Они будут именованы в соответствии с языком Windows (если присутствует файл перевода).
- Любой Шаг можно пропускать.
- Если командный файл Шага изменяет настройки системы, то при запуске сперва выводится описание предстоящих действий, и ничего не будет применено, пока Вы дважды не нажмете любую клавишу. Перед выполнением действий автоматически создается Точка восстановления системы.
- В TweakTimeSaver имеется механизм развертывания дополнительных пользовательских настроек и резервных копий. Он необязателен, прост в использовании и предлагается пользователю в очень дружественной форме, не отвлекая и не принуждая.

На заметку:

- Если для применения настроек требуется выполнение каких-то условий (например, права Администратора), то при запуске сценария выдаётся соответствующее сообщение.
- Все вносимые изменения можно откатить, вернувшись к [Точке восстановления системы](https://learn.microsoft.com/ru-ru/windows/win32/sr/restore-points), автоматически созданной до применения настроек.   
  Дополнительно можно всегда воспользоваться командным сценарием под номером 99, который отменяет применённые [параметры Групповой политики](https://habr.com/ru/companies/galssoftware/articles/543588/).
- TweakTimeSaver не тестировался в папках, содержащих пробелы в именах, но, по идее, должен работать. Просто, лучше не использовать пробелы в именах папок для командных скриптов.

## Описание командных сценариев

**start - 开始 - начать - arranque - 시작 - commencer - スタート.cmd**

Этот файл разворачивает все доступные файлы командных сценариев настройки.

Последующие запуски этого файла приводят к удалению развёрнутых файлов Шагов и повторному из развёртыванию. Под развёртыванием понимается копирование файлов Шагов из внутренней служебной папки в корень и переименование в соответствии с языком системы.

**00-1 Тёмная тема приложений и командной строки.cmd**

Применяет тёмную тему окон и программ. Приложения консоли (cmd, powershell, Windows Terminal и его Preview версия) обретают единый внешний вид и моноширинный шрифт Jetbrains Mono (более удобочитаемый, чем стандартный).

**00-2 Светлая тема приложений и командной строки.cmd**

Применяет светлую тему окон и программ. Приложения консоли (cmd, powershell, Windows Terminal и его Preview версия) обретают единый внешний вид и моноширинный шрифт [Jetbrains Mono](https://www.jetbrains.com/lp/mono/) (более удобочитаемый, чем стандартный). Фон консолей становится белым, чтобы соответствовать светлой теме оформления (в оригинале фон всегда чёрный).

**01 Панель задач и Пуск - новая раскладка закреплённых значков.cmd**

Действует в два этапа, чтобы дать возможность пропустить второй этап по желанию.

Этап 1:

- с Панели задач убираются кнопки, не являющиеся ярлыками: Поисковая панель, Просмотр задач и Copilot. Все закреплённые программы останутся.

Этап 2:

- создаётся резервная копия расстановки закреплённых значков меню Пуск;
- открепляются все значки, закреплённые на Панели задач и в Меню Пуск, включая добавленные пользователем;
- стандартные значки закрепляются в новой предлагаемой расстановке.

Примечания:

- никакие файлы ярлыков не удаляются из меню Пуск, затрагиваются лишь закреплённые значки этих ярлыков;
- ярлык на программу восстановления расстановки ярлыков Пуск  находится по пути "..\\TweakTimeSaver\\\_user-files\\\_apps\\Restore Start Menu Layout.lnk".

### **02 Применить основной набор настроек Windows.cmd**

Применяет большой набор настроек, делающих Windows сподручнее и менее надоедливой, чтобы избавить Вас от копания в бесконечных галочках настроек, то здесь, то там. В целом, всё делалось, чтобы полностью заменить в том числе и программы-твикеры, чтобы Вы только подумали о чём-то, а это уже грамотно реализовано, и ничего не надо включать/выключать, тратить время.

Пользователи, знающие язык `batchfile` и английский, могут ознакомиться с полным списком применяемых настроек, открыв файл сценария в текстовом редакторе, там есть комментарии.

Улучшение удобства, отзывчивости и эргономики:

- Полосы прокрутки в окнах перестанут исчезать и будут иметь улучшенную ширину, позволяющую легко захватывать ползунок;
- Цвета классических элементов окон программ, не поддерживающих темы оформления, обретут чуть более тёплые оттенки, вместо слепяще-белого;
- Вместо шрифта Segoe UI для текста меню и окон будет использоваться похожий, но более удобочитаемый шрифт [Open Sans](https://fonts.google.com/specimen/Open+Sans) от Google;
- Повышается отзывчивость появления меню и пиктограмм предпросмотра открытых окон на Панели задач, которые, кстати, станут крупнее.
- Классическое контекстное меню Диспетчера файлов станет намного чище - меньше лишних пунктов.
- При удержании Shift будут доступны два новых пункта контекстного меню:  
  \- для файлов и папок - "Стать владельцем и полный доступ" (права файловой системы NTFS);  
  \- для исполняемых файлов .exe - "Разрешить/Запретить доступ в Интернет" (мгновенное создание правил Брандмауэра без открытия его оснастки).
- а также сотни других аккуратных настроек.

Кроме того, многие механизмы телеметрии перестанут постоянно собирать и посылать данные под видом "диагностики", чтобы не изнашивать зря по чём Ваш SSD-диск и не нагружать процессор В ваше отсутствие. В Планировщик заданий таже будет добавлена задача повторного отключения телеметрии после каждой перезагрузки, чтобы обновления Windows не включали слежение вновь.

Примечание: далее по тексту, символ **\*** после наименований означает, что данный Шаг играет вспомогательную роль и не содержит команд изменения настроек системы.

**03 Установить предпочитаемый браузер (открыть папку).cmd \***

Открывает входящую в комплект папку с ярлыками-ссылками на веб-страницы некоторых популярных браузеров, на случай, если Вы не используете браузер Microsoft Edge.

**04 Установить драйверы устройств (открыть папку).cmd \***

Открывает два окна - Диспетчер устройств и входящую в комплект папку с ярлыками на веб-страницы некоторых производителей видеокарт.

**05 Настройки электропитания для Настольного компьютера.cmd**

- Специально выведенные в отдельный Шаг настройки, которые подходят для настольных компьютеров и ноутбуков, работающих в основном от розетки.
- Отключение гибернации, но функционал Быстрой перезагрузки (запоминание запущенных программ) останется, что уменьшает затраты места на диске С:\\
- Схема электропитания Сбалансированная:   
  \- отключение авто-перехода в Сон;   
  \- отключение авто-пробуждений во время сна;   
  \- экран гаснет через 2 часа (полезно для использования заставки, которую рекомендуется поставить для предотвращения выгорания пикселей).

**06 Установить библиотеки для работы приложений (открыть папку).cmd \***

Открывает входящую в комплект папку с ярлыками-ссылками на веб-страницы широко используемых системных библиотек, требуемых для нормальной работы приложений.

**07 Задать расположение пользовательских папок (открыть свойства).cmd \***

Одновременно открывает окна со свойствами стандартных папок пользователя (Загрузки, Документы, Изображения и т.д.), что позволяет сразу назначить новые места для них, при желании располагать свои загрузки, фото и прочее вне системных папок.

**08 Копировать файлы Пользователя на диск С (из папки).cmd \***

Шаг для пользователей, которые делают (или заинтересуются сделать) резервную копию своих файлов диска C:\\ на другой носитель с полным сохранением исходных относительных путей, чтобы после переустановки Windows вернуть их на исходные места прямым копированием обратно.

При первом запуске данного сценария открывается входящая в комплект папка с файлами-заметками, имена которых ненавязчиво предлагают два варианта действий:

1 Хранить резервную копию файлов диска С непосредственно в данной открываемой папке, а TweakTimeSaver будет всё копировать при следующем запуске этого Шага.

2 Положить прямо в эту папку ярлык, указывающий прямо на содержимое, подлежащее копированию диск С:\\. Данный сценарий извлечёт Путь к резервной копии прямо из ярлыка. Этот вариант удобен, если Вы не желаете, чтобы TweakTimeSaver брал пользовательские файлы вне своего местонахождения.

После подготовки своей резервной копии, очередной запустите этот Шаг, и сценарий выдаст предложение скопировать содержимое резервной копии в корень диска С:\\

**09 Установить пользовательские шрифты (из папки).cmd**

Действует по тому же принципу, что и предыдущий шаг, в плане подготовки источника шрифтов (внешнего по ярлыку, или сложить прямо в открываемой для этого папке).   
Регистрацию пользовательских шрифтов выполняет утилита [fontreg](https://github.com/jason-jxc/FontReg), входящая в комплект.

**66 Защитник Windows - отключить навсегда.cmd**

Индексный номер этого шага специально увеличен, чтобы выделить его отдельно от основной последовательности запуска.   
Позволяет полностью отключить механизмы безопасности Windows Defender (Брандмауэр не затрагивается).   
В результате, после перезагрузки системы, Защитник Windows не запустится, а его настройки станут недоступны для изменения, пока не будет запущен следующий командный файл с индексным номером 99.

Примеры , когда можэет понадобится отключить защиту Windows надолго:

- когда хочется, чтобы Ваш собственный компьютер параноидально не запрещал каждый раз совершать совершенно обыденные действия;
- для игр, когда нужно освободить максимум вычислительных ресурсов для повышения отзывчивости системы;
- когда защитник Windows заменяется другим антивирусом.

Примечание:  
чтобы Защитник Windows позволил себя отключить, необходимо перед этим отключить его опцию "Защита от подделки" (Tamper protection), ведь она блокирует изменение любых настроек безопасности. Командный сценарий определит состояние "Защиты от подделки" и, если что, выведет памятку, как её отключить.

**99 Защитник Windows - включить вновь.cmd**

Позволяет вернуть функционал Windows Defender, когда он понадобится вновь (99 символизирует переворот 66, т.е. возврат состояния). После перезагрузки все механизмы Защитника Windows возвращаются в работу.

### **..\\TweakTimeSaver\\\_user-files\\\_tweaks\\Personalized Settings Example - Please review and edit before use.cmd**

Отдельный сценарий для очень опытных пользователей, позволяющий применить намного больше полезных настроек.  
В данном файле собраны команды настроек, которые могут быть затронуть персональные предпочтения некоторых пользователей, и поэтому не включённых в основные файлы. Дело в том, что не было смысла городить кучу Шагов, чтобы давать выбор, в котором большинство пользователей просто запуталось бы. А так, эти настройки принесут пользу людям знающим.   
Изначально данный файл содержит предпочтения автора, которые подойдут большинству опытных пользователей. Просто, пролистайте исходный код и уберите, добавьте, что нужно. Комментарии на английском.

## От автора

Благодарю за прочтение. TweakTimeSaver мне очень помог. Надеюсь, он будет полезен и Вам.

## Языковая поддержка

Для применения настроек поддерживаются все языки Windows, но сообщения для пользователя отображаются только на языках:

- Русский
- Английский

Англоязычные имена файлов и сообщения используются, если языковой файл для текущей системы отсутствует во вложенной папке \_translations.

Добавлять поддержку языков очень просто, и ожидается, что сообщество будет управлять этим в любой форме выпуска. Вам здесь рады, так что свободно переводите, делайте "форк" и выпускайте все как Ваше, я не возражаю.

## Лицензия

Это программное обеспечение является бесплатным, с открытым исходным кодом. Пожалуйста, обратите внимание, что использование любого программного обеспечения (включая это) является Вашим выбором и ответственностью за применение и сохранность своих личных данных.

## Программное обеспечение других разработчиков

Сторонние инструменты, используемые TweakTimeSaver, включены в этот пакет для удобства пользователя. Все права принадлежат соответствующим авторам.

[Backup Start Menu Layout](https://www.sordum.org/10997/backup-start-menu-layout-v1-6/)

[Edge Group Policy Templates (Microsoft)](https://msedge.sf.dl.delivery.mp.microsoft.com/filestreamingservice/files/316147c7-70b9-48a4-9528-fcd8c82ab47f/MicrosoftEdgePolicyTemplates.cab)

[GeekDrop-Props](https://github.com/STaRDoGG/GeekDrop-Props)

[FNR - Find and Replace](http://findandreplace.io)

[FontReg](https://github.com/jason-jxc/FontReg)

[JetBrains Mono font](https://www.jetbrains.com/lp/mono/)

[LGPO - Local Group Policy Object Utility (Microsoft)](https://techcommunity.microsoft.com/t5/microsoft-security-baselines/lgpo-exe-local-group-policy-object-utility-v1-0/ba-p/701045)

[Open Sans font (Google)](https://fonts.google.com/specimen/Open+Sans)

[PowerRun](https://www.sordum.org/9416/powerrun-v1-6-run-with-highest-privileges/)

[pttb - Pin To TaskBar](https://https://github.com/0x546F6D/pttb_-_Pin_To_TaskBar)

[SetACL by Helge Klein](https://helgeklein.com/setacl/)
